<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Wimbletech Notification Bot</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.1.0/octicons.min.css">
</head>

<body>
    <div class="page-header">
        <h1>Wimbletech Notification Bot</h1>
    </div>

    <div class="container">
        <select id="directory" class="form-control"></select>
        <div class="form-group form-inline">
            <br>
            <label> Message:
                <input id="text" maxlength="32" class="form-control"></input>
            </label>
            <button id="send" class="btn btn-primary" onclick="send()">Send</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script>
        function send() {
            user = users[id - 1]
            msg = $('#text').val()

            $.post("/send", {
                user: user.user,
                msg: msg
            });
        }

        var id = 1;
        var users = [{
            "id": 1,
            "user": "ebmuir",
            "name": "Eric Muir"
        }, {
            "id": 2,
            "user": "dpfletcher",
            "name": "David Fletcher"
        }];
        users.forEach(function(element, index) {
            $('#directory').append("<option id=" + element.id + ">" + element.name + "</option>>")
        });

        $("#directory").change(function() {
            id = $(this).children(":selected").attr("id");
        });
    </script>
</body>

</html>
